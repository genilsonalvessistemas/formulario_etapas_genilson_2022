<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Formulario em abas com validação</title>
    <link href="vendor/twbs/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="vendor/components/jquery/jquery.min.js"></script>
    <script src="vendor/twbs/bootstrap/dist/js/bootstrap.bundle.js"></script>

    <link rel="stylesheet" href="assets/css/style.css">

    <link rel="shortcut icon" href="assets/favicon/icons8-dev-windows-10-70.png" type="image/x-icon" />
</head>

<body>
    <div class="container">
        <h3>Formulario com navegação em abas</h3>
        <form id="form">
            <div class="form-group">
                <div class="tab">
                    <span class="fw-bold">DADOS DO USUÁRIO</span>
                    <div class="row">
                        <div class="col-md-3">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Nome completo" required>
                        </div>
                        <div class="col-md-3">
                            <label></label>
                            <input type="date" class="form-control" placeholder="Data de nascimento" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label></label>
                            <input type="number" class="form-control" placeholder="CPF">
                        </div>
                        <div class="col-md-4">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Nome da mãe">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <label></label>
                            <input type="text" class="form-control" placeholder="CEP">
                        </div>
                        <div class="col-md-3">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Bairro">
                        </div>
                        <div class="col-md-3">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Cidade">
                        </div>
                        <div class="col-md-3">
                            <label></label>
                            <input type="text" class="form-control" placeholder="UF">
                        </div>
                    </div>
                </div>

                <div class="tab">
                    <span class="fw-bold">Contato</span>
                    <div class="row">
                        <div class="col-md-4">
                            <label></label>
                            <input type="tel" type="" class="form-control" placeholder="Telefone">
                        </div>
                        <div class="col-md-4">
                            <label></label>
                            <input type="email" class="form-control" placeholder="Email" required>
                        </div>
                        <div class="col-md-4">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Website">
                        </div>
                    </div>
                </div>

                <div class="tab">
                    <span class="fw-bold">Data de Aniversário:</span>
                    <div class="row">
                        <div class="col-md-2">
                            <label></label>
                            <input type="date" class="form-control" placeholder="dd/mm/aaaa" required>
                            <label></label>
                        </div>
                    </div>
                </div>

                <div class="tab">
                    <span class="fw-bold">Login Info:</span>
                    <div class="row">
                        <div class="col-md-3">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Username" required>
                            <label></label>
                            <input type="password" class="form-control" placeholder="Password" required>
                        </div>
                    </div>
                </div>
            </div>
            <div class="step_itens">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
            </div>
            <button type="button" id="nextBtn" onclick="nextPrev(1)" class="btn btn-success btn-sm">Próximo</button>
            <button type="button" id="prevBtn" onclick="nextPrev(-1)" class="btn btn-danger btn-sm">Voltar</button>
        </form>
    </div>
</body>
<script>
    // A guia atual é definida como a primeira guia (0)
    var currentTab = 0;
    // Display the current tab
    showTab(currentTab);
    function showTab(n) {
        // Esta função exibirá a guia especificada do formulário ...
        var x = document.getElementsByClassName('tab');
        x[n].style.display = 'block';
        // ... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById('prevBtn').style.display = 'none';
        } else {
            document.getElementById('prevBtn').style.display = 'inline';
        }
        if (n == x.length - 1) {
            document.getElementById('nextBtn').innerHTML = 'Cadastrar';
        } else {
            document.getElementById('nextBtn').innerHTML = 'Próximo';
        }
        // ... e execute uma função que exiba o indicador de etapa correto:
        fixStepIndicator(n);
    }

    function nextPrev(n) {
        // Esta função irá descobrir qual guia exibir
        var x = document.getElementsByClassName('tab');
        // Sai da função se algum campo na aba atual for inválido:
        if (n == 1 && !validateForm()) return false;
        // Esconde a aba atual:
        x[currentTab].style.display = 'none';
        // Aumenta ou diminui a guia atual em 1:
        currentTab = currentTab + n;
        // se você chegou ao final do formulário... :
        if (currentTab >= x.length) {
            //...o formulário é enviado: :
            document.getElementById('form').submit();
            $('#form').submit(function (event) {
                event.preventDefault();
                var data = {
                    name: $('#name').val(),
                    email: $('#email').val(),
                    superheroAlias: $('#superheroAlias').val()
                };

                $.ajax({
                    type: 'POST',
                    url: 'index.html',
                    data: 'data',
                    dataType: 'json',
                    encode: 'true'
                }).done(function (data) {
                    console.log(data);
                });

                event.preventDefault();
            });

            return true;
        }

        // Caso contrário, exibe a guia correta:
        showTab(currentTab);

    }

    function validateForm() {
        // Esta função trata da validação dos campos do formulário
        var x, y, i, valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("input");
        // Um ​​loop que verifica todos os campos de entrada na guia atual:
        for (i = 0; i < y.length; i++) {
            // Se um campo estiver vazio...
            if (y[i].required && y[i].value == "") {
                // adiciona uma classe "inválida" ao campo:
                y[i].className += " invalid";
                // e defina o status válido atual para false:
                valid = false;
            }
        }
        // Se o status válido for verdadeiro, marque a etapa como concluída e válida:
        if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
        }
        // retorna o status válido
        return valid;
    }

    function fixStepIndicator(n) {
        // Esta função remove a classe "ativa" de todas as etapas..
        var i,
            x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class to the current step:
        x[n].className += " active";
    }



</script>

</html>